{"ast":null,"code":"import SockJS from'sockjs-client';import{Stomp}from'@stomp/stompjs';export const initializeWebSocket=(url,onMessageReceived,nickname)=>{const socket=new SockJS(url);const client=Stomp.over(socket);client.connect({},()=>{const sessionId=extractSessionId(client.ws._transport.url);client.subscribe(`/queue/specific-user-${sessionId}`,msg=>{onMessageReceived(JSON.parse(msg.body));});client.send('/app/chat.addUser',{},nickname);});return client;};export const disconnectWebSocket=client=>{if(client){client.disconnect();}};const extractSessionId=url=>{return url.replace('ws://16.171.206.255:8080/ws/','').replace('/websocket','').replace(/^[0-9]+\\//g,'');};","map":{"version":3,"names":["SockJS","Stomp","initializeWebSocket","url","onMessageReceived","nickname","socket","client","over","connect","sessionId","extractSessionId","ws","_transport","subscribe","msg","JSON","parse","body","send","disconnectWebSocket","disconnect","replace"],"sources":["/home/n/Desktop/temp/app/src/services/WebSocketService.ts"],"sourcesContent":["import SockJS from 'sockjs-client';\nimport { Stomp } from '@stomp/stompjs';\n\nexport const initializeWebSocket = (url: string, onMessageReceived: (msg: any) => void, nickname: string) => {\n  const socket = new SockJS(url);\n  const client = Stomp.over(socket);\n\n  client.connect({}, () => {\n    const sessionId = extractSessionId(client.ws._transport.url);\n    client.subscribe(`/queue/specific-user-${sessionId}`, (msg) => {\n      onMessageReceived(JSON.parse(msg.body));\n    });\n    client.send('/app/chat.addUser', {}, nickname);\n  });\n\n  return client;\n};\n\nexport const disconnectWebSocket = (client: any) => {\n  if (client) {\n    client.disconnect();\n  }\n};\n\nconst extractSessionId = (url: string): string => {\n  return url.replace('ws://16.171.206.255:8080/ws/', '')\n            .replace('/websocket', '')\n            .replace(/^[0-9]+\\//g, '');\n};\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,eAAe,CAClC,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,MAAO,MAAM,CAAAC,mBAAmB,CAAGA,CAACC,GAAW,CAAEC,iBAAqC,CAAEC,QAAgB,GAAK,CAC3G,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAN,MAAM,CAACG,GAAG,CAAC,CAC9B,KAAM,CAAAI,MAAM,CAAGN,KAAK,CAACO,IAAI,CAACF,MAAM,CAAC,CAEjCC,MAAM,CAACE,OAAO,CAAC,CAAC,CAAC,CAAE,IAAM,CACvB,KAAM,CAAAC,SAAS,CAAGC,gBAAgB,CAACJ,MAAM,CAACK,EAAE,CAACC,UAAU,CAACV,GAAG,CAAC,CAC5DI,MAAM,CAACO,SAAS,CAAC,wBAAwBJ,SAAS,EAAE,CAAGK,GAAG,EAAK,CAC7DX,iBAAiB,CAACY,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,CAAC,CAAC,CACzC,CAAC,CAAC,CACFX,MAAM,CAACY,IAAI,CAAC,mBAAmB,CAAE,CAAC,CAAC,CAAEd,QAAQ,CAAC,CAChD,CAAC,CAAC,CAEF,MAAO,CAAAE,MAAM,CACf,CAAC,CAED,MAAO,MAAM,CAAAa,mBAAmB,CAAIb,MAAW,EAAK,CAClD,GAAIA,MAAM,CAAE,CACVA,MAAM,CAACc,UAAU,CAAC,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAV,gBAAgB,CAAIR,GAAW,EAAa,CAChD,MAAO,CAAAA,GAAG,CAACmB,OAAO,CAAC,8BAA8B,CAAE,EAAE,CAAC,CAC3CA,OAAO,CAAC,YAAY,CAAE,EAAE,CAAC,CACzBA,OAAO,CAAC,YAAY,CAAE,EAAE,CAAC,CACtC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}