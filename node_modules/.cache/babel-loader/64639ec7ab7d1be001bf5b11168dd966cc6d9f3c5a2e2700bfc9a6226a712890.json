{"ast":null,"code":"import SockJS from 'sockjs-client';\nimport { Stomp } from '@stomp/stompjs';\n'http://16.171.206.255:8080/ws';\nexport const initializeWebSocket = (url, onMessageReceived, nickname) => {\n  const socket = new SockJS(url);\n  const client = Stomp.over(socket);\n  client.connect({}, () => {\n    const sessionId = extractSessionId(client.ws._transport.url);\n    client.subscribe(`/queue/specific-user-${sessionId}`, msg => {\n      onMessageReceived(JSON.parse(msg.body));\n    });\n    client.send('/app/chat.addUser', {}, nickname);\n  });\n  return client;\n};\nexport const disconnectWebSocket = client => {\n  if (client) {\n    client.disconnect();\n  }\n};\nconst extractSessionId = url => {\n  return url.replace('ws://16.171.206.255:8080/ws/', '').replace('/websocket', '').replace(/^[0-9]+\\//g, '');\n};","map":{"version":3,"names":["SockJS","Stomp","initializeWebSocket","url","onMessageReceived","nickname","socket","client","over","connect","sessionId","extractSessionId","ws","_transport","subscribe","msg","JSON","parse","body","send","disconnectWebSocket","disconnect","replace"],"sources":["/home/n/Desktop/privchat10.11.2024/privchatFrontend/src/services/WebSocketService.ts"],"sourcesContent":["import SockJS from 'sockjs-client';\nimport { Stomp } from '@stomp/stompjs';\n 'http://16.171.206.255:8080/ws'\nexport const initializeWebSocket = (url: string, onMessageReceived: (msg: any) => void, nickname: string) => {\n  const socket = new SockJS(url);\n  const client = Stomp.over(socket);\n\n  client.connect({}, () => {\n    const sessionId = extractSessionId(client.ws._transport.url);\n    client.subscribe(`/queue/specific-user-${sessionId}`, (msg) => {\n      onMessageReceived(JSON.parse(msg.body));\n    });\n    client.send('/app/chat.addUser', {}, nickname);\n  });\n\n  return client;\n};\n\nexport const disconnectWebSocket = (client: any) => {\n  if (client) {\n    client.disconnect();\n  }\n};\n\nconst extractSessionId = (url: string): string => {\n  return url.replace('ws://16.171.206.255:8080/ws/', '')\n            .replace('/websocket', '')\n            .replace(/^[0-9]+\\//g, '');\n};\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,eAAe;AAClC,SAASC,KAAK,QAAQ,gBAAgB;AACrC,+BAA+B;AAChC,OAAO,MAAMC,mBAAmB,GAAGA,CAACC,GAAW,EAAEC,iBAAqC,EAAEC,QAAgB,KAAK;EAC3G,MAAMC,MAAM,GAAG,IAAIN,MAAM,CAACG,GAAG,CAAC;EAC9B,MAAMI,MAAM,GAAGN,KAAK,CAACO,IAAI,CAACF,MAAM,CAAC;EAEjCC,MAAM,CAACE,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM;IACvB,MAAMC,SAAS,GAAGC,gBAAgB,CAACJ,MAAM,CAACK,EAAE,CAACC,UAAU,CAACV,GAAG,CAAC;IAC5DI,MAAM,CAACO,SAAS,CAAC,wBAAwBJ,SAAS,EAAE,EAAGK,GAAG,IAAK;MAC7DX,iBAAiB,CAACY,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,CAAC,CAAC;IACzC,CAAC,CAAC;IACFX,MAAM,CAACY,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAEd,QAAQ,CAAC;EAChD,CAAC,CAAC;EAEF,OAAOE,MAAM;AACf,CAAC;AAED,OAAO,MAAMa,mBAAmB,GAAIb,MAAW,IAAK;EAClD,IAAIA,MAAM,EAAE;IACVA,MAAM,CAACc,UAAU,CAAC,CAAC;EACrB;AACF,CAAC;AAED,MAAMV,gBAAgB,GAAIR,GAAW,IAAa;EAChD,OAAOA,GAAG,CAACmB,OAAO,CAAC,8BAA8B,EAAE,EAAE,CAAC,CAC3CA,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CACzBA,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;AACtC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}