{"ast":null,"code":"import React,{useEffect,useState}from'react';import{MessengerService}from'../api/MessengerService';import{useUser}from'../context/UserContext';import{useMessenger}from'../context/MessengerContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LeftBar=_ref=>{let{onChatSelect,trigger}=_ref;const{user}=useUser();const{chats}=useMessenger();const[searchTerm,setSearchTerm]=useState('');const[showedChats,setShowedChats]=useState([]);useEffect(()=>{if(chats){setShowedChats(chats);}else{setShowedChats([]);}},[chats,trigger]);async function handleSendingRequest(){if(!user)return;const response=await MessengerService.sendChatRequest({requestedNickname:searchTerm,requesterPublicKey:user.publicKey},user.jwt);if(response=='success'){setSearchTerm('');}}const renderChats=()=>{return showedChats.map(chat=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>onChatSelect(chat),style:{cursor:'pointer',padding:'5px 0'},children:getOpponentNickname(user,chat)}));};return/*#__PURE__*/_jsxs(\"aside\",{style:{width:'250px',padding:'10px',borderRight:'1px solid #ccc'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{width:'100%',marginBottom:'10px',padding:'5px'}}),/*#__PURE__*/_jsx(\"button\",{className:\"pr-2 pl-2 bg-slate-300 rounded-xl\",onClick:handleSendingRequest,children:\" + \"})]}),/*#__PURE__*/_jsx(\"ul\",{children:renderChats()})]});};export default LeftBar;export function getOpponentNickname(user,chat){if((user===null||user===void 0?void 0:user.nickname)==chat.requesterNickname)return chat.requestedNickname;else{return chat.requesterNickname;}}export function getOpponentPublicKey(user,chat){if((user===null||user===void 0?void 0:user.publicKey)==chat.requesterPublicKey)return chat.requestedPublicKey;else{return chat.requesterPublicKey;}}","map":{"version":3,"names":["React","useEffect","useState","MessengerService","useUser","useMessenger","jsx","_jsx","jsxs","_jsxs","LeftBar","_ref","onChatSelect","trigger","user","chats","searchTerm","setSearchTerm","showedChats","setShowedChats","handleSendingRequest","response","sendChatRequest","requestedNickname","requesterPublicKey","publicKey","jwt","renderChats","map","chat","onClick","style","cursor","padding","children","getOpponentNickname","width","borderRight","className","type","placeholder","value","onChange","e","target","marginBottom","nickname","requesterNickname","getOpponentPublicKey","requestedPublicKey"],"sources":["/home/n/Desktop/temp/app/src/components/LeftBar.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { MessengerService } from '../api/MessengerService';\nimport { useUser } from '../context/UserContext';\nimport { ChatInterface } from '../types';\nimport { useMessenger } from '../context/MessengerContext';\n\n\ninterface LeftBarProps {\n  onChatSelect: (chat: ChatInterface) => void;\n  trigger: number\n}\n\n\nconst LeftBar: React.FC<LeftBarProps> = ({ onChatSelect, trigger }) => {\n  const { user } = useUser()\n  const { chats } = useMessenger()\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showedChats, setShowedChats] = useState<ChatInterface[]>([])\n\n\n\n\n  useEffect(() => {\n    if (chats) {\n      setShowedChats(chats);\n    } else {\n      setShowedChats([]);\n    }\n  }, [chats, trigger]);\n\n  async function handleSendingRequest() {\n    if (!user) return\n    const response = await MessengerService.sendChatRequest(\n      { requestedNickname: searchTerm, requesterPublicKey: user.publicKey },\n      user.jwt\n    )\n    if (response == 'success') {\n      setSearchTerm('')\n    }\n  }\n\n  const renderChats: any = () => {\n    return (\n      \n      showedChats.map((chat: ChatInterface) => (\n          <li\n            onClick={() => onChatSelect(chat)}\n            style={{ cursor: 'pointer', padding: '5px 0' }}\n          >\n            {getOpponentNickname(user, chat)}\n          </li>\n        )) \n    )\n  }\n\n  return (\n    <aside style={{ width: '250px', padding: '10px', borderRight: '1px solid #ccc' }}>\n      <div className='flex'>\n        <input\n          type='text'\n          placeholder='Search...'\n          value={searchTerm}\n          onChange={e => setSearchTerm(e.target.value)}\n          style={{ width: '100%', marginBottom: '10px', padding: '5px' }}\n        />\n        <button className='pr-2 pl-2 bg-slate-300 rounded-xl' onClick={handleSendingRequest}> + </button>\n      </div>\n      <ul>\n        {renderChats()}\n      </ul>\n    </aside>\n  );\n};\n\nexport default LeftBar;\n\n\nexport function getOpponentNickname(user: any, chat: ChatInterface) {\n  if (user?.nickname == chat.requesterNickname) return chat.requestedNickname\n  else { return chat.requesterNickname }\n}\n\nexport function getOpponentPublicKey(user: any, chat: ChatInterface) {\n  if (user?.publicKey == chat.requesterPublicKey) return chat.requestedPublicKey\n  else { return chat.requesterPublicKey }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}